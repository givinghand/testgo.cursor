
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%; /* White */
    --foreground: 210 10% 23%; /* Dark Blue-Gray / Anthracite */
    --card: 181 49% 96%; /* Very Light Verdigris */
    --card-foreground: 210 10% 23%;
    --popover: 0 0% 100%;
    --popover-foreground: 210 10% 23%;
    --primary: 181 49% 44%; /* Verdigris (#38A3A5) */
    --primary-foreground: 0 0% 100%; /* White */
    --secondary: 152 54% 57%; /* Emerald (#57CC99) */
    --secondary-foreground: 152 54% 15%; /* Darker Emerald for text */
    --muted: 180 20% 96%; /* Very Light Cyan/Gray */
    --muted-foreground: 180 10% 45%; /* Medium Cyan/Gray */
    --accent: 138 78% 71%; /* Light Green (#80ED99) */
    --accent-foreground: 138 60% 25%; /* Darker Light Green for text */
    --destructive: 339 65% 44%; /* Tyrian Purple (#661432) */
    --destructive-foreground: 0 0% 100%; /* White */
    --border: 180 20% 88%; /* Light Cyan/Gray Border */
    --input: 180 20% 88%;
    --ring: 181 49% 44%; /* Verdigris */
    --radius: 0.5rem;

    --brand-purple: 339 65% 24%;
    --brand-teal: 181 49% 44%;
    --brand-white: 0 0% 100%;
    --brand-emerald: 152 54% 57%;
    --brand-light-green: 138 78% 71%;
    --anthracite-gray: 210 10% 23%; 
    --anthracite-gray-light: 210 10% 30%; 
    --anthracite-gray-lighter: 210 10% 40%; 
  }

  .dark {
    --background: 200 15% 12%; 
    --foreground: 180 10% 85%; 
    --card: 181 49% 18%; 
    --card-foreground: 180 10% 85%;
    --popover: 200 15% 10%;
    --popover-foreground: 180 10% 85%;
    --primary: 181 49% 50%; 
    --primary-foreground: 0 0% 100%; 
    --secondary: 152 54% 50%; 
    --secondary-foreground: 0 0% 100%;
    --muted: 200 15% 25%; 
    --muted-foreground: 180 10% 60%; 
    --accent: 138 78% 65%; 
    --accent-foreground: 138 60% 20%;
    --destructive: 339 65% 55%; 
    --destructive-foreground: 0 0% 100%;
    --border: 200 15% 25%;
    --input: 200 15% 25%;
    --ring: 181 49% 50%;
    --anthracite-gray: 210 10% 70%; 
    --anthracite-gray-light: 210 10% 60%;
    --anthracite-gray-lighter: 210 10% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Nunito', sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Nunito', sans-serif;
    font-weight: 700; 
  }
}

@layer components {
  .card {
    @apply bg-card shadow-md;
  }
}

.hero-gradient {
  background: linear-gradient(135deg, hsl(var(--primary) / 0.9) 0%, hsl(var(--secondary) / 0.7) 50%, hsl(var(--accent) / 0.5) 100%);
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
  100% { transform: translateY(0px); }
}

.glass-effect {
  background: hsla(var(--card) / 0.5);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border: 1px solid hsla(var(--border) / 0.2);
}

.progress-gradient {
  background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));
}

/* Lava Lamp Animation */
@keyframes drop {
  0% { transform: translateY(-10px); opacity: 0.8; }
  50% { transform: translateY(80px); opacity: 1; }
  100% { transform: translateY(-10px); opacity: 0.8; }
}

.lava-lamp {
  position: relative;
  width: 50px;
  height: 100px;
  background: hsl(var(--primary) / 0.1);
  border-radius: 25px;
  overflow: hidden;
  border: 2px solid hsl(var(--primary) / 0.3);
  box-shadow: inset 0 0 10px hsl(var(--primary) / 0.2), 0 0 15px hsl(var(--primary) / 0.1);
}

.lava-lamp .bubble {
  position: absolute;
  top: -20px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  animation-name: drop;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
}

.lava-lamp .bubble1 { background: linear-gradient(to bottom, hsl(var(--primary)), hsl(var(--secondary))); left: 15px; animation-duration: 5s; animation-delay: 0s; }
.lava-lamp .bubble2 { background: linear-gradient(to bottom, hsl(var(--secondary)), hsl(var(--accent))); left: 5px; animation-duration: 4s; animation-delay: 0.5s; }
.lava-lamp .bubble3 { background: linear-gradient(to bottom, hsl(var(--accent)), hsl(var(--primary))); left: 25px; animation-duration: 6s; animation-delay: 1s; }
.lava-lamp .bubble4 { background: linear-gradient(to bottom, hsl(var(--destructive)), hsl(var(--primary) / 0.7)); left: 10px; animation-duration: 4.5s; animation-delay: 0.2s; }



/* ====== GLOBAL COLOR DEFINITIONS ====== */
:root {
  --anthracite-front: #36454F;
  --anthracite-side: #2A3439;
  --anthracite-top: #4A5D67;
  --primary-h: 210;
  --primary-s: 90%;
  --primary-l: 55%;
  --primary: var(--primary-h), var(--primary-s), var(--primary-l);
  --border-h: 210;
  --border-s: 10%;
  --border-l: 40%;
  --border: var(--border-h), var(--border-s), var(--border-l);
}

/* ====== CUBE ANIMATION STYLES ====== */

@keyframes animateContainerHue {
  0% {
    filter: hue-rotate(0deg);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}

.cube-animation-section-container {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 350px; /* You can adjust this if needed based on the new size */
  /* ADJUSTMENTS BASED ON EXAMPLE */
  top: -80px; /* Optional: For vertical positioning like example */
  transform: skewY(-20deg); /* Matches example */
  overflow: visible;
  padding: 40px 0; /* Keep or adjust as needed for your section layout */
  animation: animateContainerHue 10s linear infinite;
}

.cube-animation-section-container .cube-wrapper {
  position: relative;
  z-index: 2;
}

.cube-animation-section-container .cube-wrapper:nth-child(2) {
  z-index: 1;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  translate: -60px -60px; /* Matches example (removed scale) */
}
.cube-animation-section-container .cube-wrapper:nth-child(3) {
  z-index: 3;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  translate: 60px 60px; /* Matches example (removed scale) */
}

.cube-animation-section-container .cube-group {
  position: absolute;
  display: flex;
  flex-direction: column;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  gap: 30px; /* Matches example */
  translate: calc(-70px * var(--x)) calc(-60px * var(--y)); /* Matches example */
}

.cube-animation-section-container .cube-element {
  position: relative;
  display: inline-block;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  width: 50px;  /* Matches example */
  height: 50px; /* Matches example */
  background: var(--anthracite-front);
  z-index: calc(1 * var(--i));
  transition: background 1.2s, filter 1.2s;
  box-shadow: 0 2px 8px hsla(0, 0%, 0%, 0.15);
}

.cube-animation-section-container .cube-element:hover {
  background: hsl(var(--primary));
  filter: drop-shadow(0 0 25px hsl(var(--primary)));
  transition: background 0s, filter 0s;
}

.cube-animation-section-container .cube-element:hover::before,
.cube-animation-section-container .cube-element:hover::after {
  background: hsl(var(--primary));
  transition: background 0s;
}

.cube-animation-section-container .cube-element::before { /* Side Face */
  content: "";
  position: absolute;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  left: -40px; /* Matches example */
  width: 40px;  /* Matches example */
  height: 100%;
  background: var(--anthracite-side);
  transform-origin: right;
  transform: skewY(45deg); /* Matches example */
  transition: background 1.2s;
  border-right: 1px solid hsl(var(--border) / 0.6);
}

.cube-animation-section-container .cube-element::after { /* Top Face */
  content: "";
  position: absolute;
  /* ADJUSTMENTS BASED ON EXAMPLE */
  top: -40px; /* Matches example */
  left: 0px; /* Matches example */
  width: 100%;
  height: 40px; /* Matches example */
  background: var(--anthracite-top);
  transform-origin: bottom;
  transform: skewX(45deg); /* Matches example */
  transition: background 1.2s;
  border-bottom: 1px solid hsl(var(--border) / 0.6);
}



/* Basic body styling for centering and background like the video */
body {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: #e8e8e8; /* Light gray background from video */
  margin: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  padding: 20px; /* So card isn't flush with edge on small screens */
}

.testimonial-card-scratch {
  position: relative;
  width: 12.5em; /* Approx 200px if 1em=16px */
  min-height: 7.5em; /* Initial height, approx 120px */
  background-color: #ffffff;
  border-radius: 15px;
  padding: 1em; /* Approx 16px */
  box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 1px, rgba(0, 0, 0, 0.07) 0px 2px 2px, rgba(0, 0, 0, 0.07) 0px 4px 4px, rgba(0, 0, 0, 0.07) 0px 8px 8px, rgba(0, 0, 0, 0.07) 0px 16px 16px;
  overflow: hidden; /* Crucial for clipping and text truncation */
  cursor: pointer;
  transition: min-height 0.4s ease-in-out;
  font-size: 16px; /* Base font size for em calculations */
}

.reviewer-avatar-scratch {
  position: absolute;
  top: 1em; /* (16px) from top of card's padding box */
  right: 1em; /* (16px) from right of card's padding box */
  width: 4.375em; /* 70px */
  height: 4.375em; /* 70px */
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #fff; /* Optional: small border for avatar */
  box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Optional: slight shadow for avatar */
  transition: top 0.4s ease-in-out, right 0.4s ease-in-out, left 0.4s ease-in-out,
              width 0.4s ease-in-out, height 0.4s ease-in-out,
              transform 0.4s ease-in-out;
  z-index: 10;
}

.card-content-wrapper-scratch {
  /* Make space for the avatar on the right in the initial state */
  padding-right: calc(4.375em + 0.5em); /* avatar width + a small gap */
  transition: transform 0.4s ease-in-out, padding-right 0.4s ease-in-out, text-align 0.2s ease-in-out 0.1s;
  /* Delay text-align change slightly so it happens as content settles */
}

.reviewer-name-scratch {
  font-size: 1.1em; /* Approx 17.6px */
  font-weight: bold;
  color: #333;
  margin-top: 0; /* Adjusted from default h3 margin */
  margin-bottom: 0.5em; /* Approx 8px */
}

.review-text-scratch {
  font-size: 0.8em; /* Approx 12.8px */
  line-height: 1.5;
  color: #555;
  margin-top: 0;
  margin-bottom: 0; /* Remove bottom margin if any */

  /* Text truncation for initial state */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3; /* Show 3 lines initially */
  overflow: hidden;
  text-overflow: ellipsis;
  max-height: calc(0.8em * 1.5 * 3); /* (font-size * line-height * lines) for smooth transition */
  transition: max-height 0.4s ease-in-out 0.1s, -webkit-line-clamp 0s linear 0.4s;
  /* Delay max-height transition slightly, snap line-clamp off after transition */
}

.review-stars-scratch,
.reviewer-details-scratch {
  position: absolute;
  left: 1em; /* Align with card padding */
  right: 1em; /* Align with card padding */
  text-align: center;
  opacity: 0;
  transform: translateY(10px); /* Start slightly down for upward reveal */
  transition: opacity 0.3s ease-in-out 0.15s, transform 0.3s ease-in-out 0.15s, top 0.4s ease-in-out;
  /* Delay appearance until card is mostly expanded */
  color: #333;
  z-index: 5;
}

.review-stars-scratch {
  /* top position will be set on hover */
  font-size: 1.2em; /* Approx 19.2px */
  color: #f8b400; /* Gold color for stars */
}
.review-stars-scratch span {
  margin: 0 0.05em;
}

.reviewer-details-scratch {
  /* top position will be set on hover */
  font-size: 0.85em; /* Approx 13.6px */
  line-height: 1.4;
  color: #666;
}

/* --- HOVER STATES --- */

.testimonial-card-scratch:hover {
  min-height: 20em; /* Expanded height, approx 320px - adjust as needed */
}

.testimonial-card-scratch:hover .reviewer-avatar-scratch {
  top: 1.5em; /* Approx 24px from top */
  left: 50%; /* Center horizontally */
  right: auto; /* Override initial 'right' */
  width: 6.25em; /* 100px */
  height: 6.25em; /* 100px */
  transform: translateX(-50%) rotateX(360deg); /* Center and 3D flip */
}

.testimonial-card-scratch:hover .card-content-wrapper-scratch {
  padding-right: 0; /* Remove padding as avatar is no longer to the side */
  text-align: center;
  /* 
    Calculate translateY:
    Avatar top: 1.5em, avatar height: 6.25em. Bottom of avatar = 1.5 + 6.25 = 7.75em.
    Desired space below avatar: 1em.
    Content should start at 7.75em + 1em = 8.75em from card's top edge.
    Card's internal padding is 1em. So content starts 1em down from card edge.
    TranslateY = (target content top from card edge) - (initial content top from card edge due to padding)
                 = 8.75em - 1em = 7.75em
  */
  transform: translateY(7.75em);
}

.testimonial-card-scratch:hover .review-text-scratch {
  -webkit-line-clamp: 10; /* Allow more lines, effectively unsetting clamp for most texts */
  max-height: 15em; /* Generous max-height for full text */
  /* transition-delay for max-height can be adjusted if needed */
}

.testimonial-card-scratch:hover .review-stars-scratch {
  /*
    Positioning:
    Content wrapper moved by 7.75em. Content starts 1em (padding) + 7.75em = 8.75em from card top.
    Name: ~1.1em + 0.5em margin = 1.6em
    Review text (example 4 lines): 0.8em * 1.5 * 4 = 4.8em
    Total height of name + review text = 1.6em + 4.8em = 6.4em
    Bottom of review text = 8.75em (start of content) + 6.4em (height of content) = 15.15em
    Space before stars: 0.75em
    Stars top = 15.15em + 0.75em = 15.9em
  */
  top: 15.9em; /* Adjust this based on your typical content length */
  opacity: 1;
  transform: translateY(0);
}

.testimonial-card-scratch:hover .reviewer-details-scratch {
  /*
    Stars top: 15.9em, Stars height: ~1.2em (font-size)
    Bottom of stars = 15.9em + 1.2em = 17.1em
    Space before details: 0.5em
    Details top = 17.1em + 0.5em = 17.6em
  */
  top: 17.6em; /* Adjust this based on your typical content length */
  opacity: 1;
  transform: translateY(0);
}



/* === Updated CSS for Gradient "Wave" Effect (Your Existing Code - Unchanged) === */
.blob-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit; /* Inherits the 14px from .blob-card */
  z-index: 0; /* Positioned behind .blob-animated and .blob-card-bg */
  
  /* Gradient using colors inspired by your initially provided image */
  background: linear-gradient(
    135deg, 
    hsl(211, 100%, 62%), /* Bright Blue */
    hsl(157, 100%, 68%)  /* Bright Green */
  );
  
  /* Adjust background size for wave effect. 250% gives a good sweep. */
  background-size: 250% 250%; 
  
  opacity: 0.5; /* Increased opacity for more visible waves. Adjust as needed (0.4-0.6). */
  filter: blur(20px); /* Slightly reduced blur for more defined, yet soft, waves. */
  
  /* New animation for a flowing wave effect */
  animation: gradient-wave-animation 8s linear infinite;
}

/* Keyframes for the gradient wave animation (Your Existing Code - Unchanged) */
@keyframes gradient-wave-animation {
  0% {
    background-position: 0% 0%; /* Start with the top-left of the oversized gradient */
  }
  100% {
    background-position: 100% 100%; /* Sweep to the bottom-right of the oversized gradient.
                                       This creates a diagonal sweep. The animation will jump
                                       back to 0% at the start of the next iteration, creating
                                       a continuous flow of waves. */
  }
}

/* === Modified CSS for Cycling Gradient Glow Around the Card === */
.blob-card::after {
  content: "";
  position: absolute;
  inset: 0; /* Fills the .blob-card */
  border-radius: inherit; /* Matches card's rounding */
  z-index: 0; /* Same level as ::before; ::after renders on top of ::before due to source order.
                 Still behind .blob-animated (z-index:1) and .blob-card-bg (z-index:2) */
  pointer-events: none; /* Ensure it doesn't interfere with interactions */

  /* The gradient for the cycling glow. Using the same blue/green theme. */
  background: linear-gradient(
    45deg, /* Diagonal gradient gives a nice visual sweep as it moves */
    hsl(211, 100%, 62%), /* Bright Blue */
    hsl(157, 100%, 68%), /* Bright Green */
    hsl(211, 100%, 62%)  /* Blue again to help with seamless color looping */
  );
  
  /* Make the background much larger than the element to allow for sweeping animation */
  background-size: 300% 300%; /* Oversized background for the glow effect */
  
  opacity: 0.6; /* Overall opacity of the glowing layer. Adjust 0.4-0.8 for intensity. */
  filter: blur(35px); /* Adjust blur for desired softness/spread of the glow.
                         The overflow:hidden on .blob-card will clip this. */
  
  /* Animation for the glow to cycle around */
  animation: cycling-glow-around 6s linear infinite; /* "Normal speed" animation */
}

/* Keyframes for the cycling gradient glow animation */
@keyframes cycling-glow-around {
  0%   { background-position: 0% 0%; }     /* Start top-left */
  25%  { background-position: 100% 0%; }   /* Move to top-right */
  50%  { background-position: 100% 100%; } /* Move to bottom-right */
  75%  { background-position: 0% 100%; }   /* Move to bottom-left */
  100% { background-position: 0% 0%; }     /* Return to start for a continuous loop */
}

/* === Your Existing CSS (Unchanged) === */
/* Blob Card Effect */
.blob-card {
  position: relative;
  width: 100%; /* Responsive width */
  height: 100%; /* Fill container */
  min-height: 250px; /* Minimum height */
  border-radius: 14px;
  z-index: 1; 
  overflow: hidden; /* Crucial for containing the blurred pseudo-elements and their animations */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 10px 10px 30px hsl(var(--foreground) / 0.1), -10px -10px 30px hsl(var(--background) / 0.7);
  transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
}

.blob-card:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 15px 15px 40px hsl(var(--foreground) / 0.15), -15px -15px 40px hsl(var(--background) / 0.6);
}

.blob-card-bg {
  position: absolute;
  top: 5px;
  left: 5px;
  right: 5px;
  bottom: 5px;
  z-index: 2;
  background: hsl(var(--card) / 0.45); /* Use theme card color -- THIS LINE IS KEPT AS IS */
  backdrop-filter: blur(10px); /* Softer blur */
  -webkit-backdrop-filter: blur(10px);
  border-radius: 10px;
  overflow: hidden;
  outline: 1px solid hsl(var(--border) / 0.5); /* Subtle outline */
}

.blob-animated {
  position: absolute;
  z-index: 1; /* Behind blob-card-bg */
  top: 50%;
  left: 50%;
  width: 120px; /* Slightly smaller */
  height: 120px;
  border-radius: 50%;
  background: linear-gradient(45deg, hsl(var(--primary)), hsl(var(--secondary))); /* Theme colors */
  opacity: 0.7; /* More subtle */
  filter: blur(15px); /* Increased blur */
  animation: blob-bounce 8s infinite ease-in-out; /* Slower animation */
}

@keyframes blob-bounce {
  0% { transform: translate(-100%, -100%) translate3d(0, 0, 0) scale(1); }
  25% { transform: translate(-100%, -100%) translate3d(80%, 0, 0) scale(1.1); } /* Adjusted movement */
  50% { transform: translate(-100%, -100%) translate3d(80%, 80%, 0) scale(0.9); }
  75% { transform: translate(-100%, -100%) translate3d(0, 80%, 0) scale(1.05); }
  100% { transform: translate(-100%, -100%) translate3d(0, 0, 0) scale(1); }
}

/* Ensure card content is above the blob effect */
.blob-card-content {
  position: relative;
  z-index: 3; /* Above blob-card-bg and blob-animated */
  padding: 1.5rem; /* p-6 */
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}